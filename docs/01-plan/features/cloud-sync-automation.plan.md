# [Plan] 클라우드 동기화 자동화 (v3.5)

## 1. 개요
- **기능명**: 클라우드 동기화 자동화 및 지능형 알림
- **목표**: 사용자의 수동 개입을 최소화하고, 여러 기기 간 데이터 일관성을 보장하여 '실시간 동기화'에 가까운 UX 제공.
- **주요 기능**:
    1. **자동 백업 (Auto-upload)**: 데이터 변경 감지 후 일정 시간(Debounce) 뒤 자동 클라우드 백업.
    2. **버전 체크 (Version-polling)**: 클라우드의 최신 데이터 상태를 주기적으로 확인하여 로컬보다 최신일 경우 사용자에게 알림.

## 2. 사용자 스토리
- "내가 일지를 작성하고 잠시 멈추면, 굳이 백업 버튼을 누르지 않아도 안전하게 클라우드에 저장되었으면 좋겠어."
- "노트북에서 작성하다가 태블릿을 켰을 때, 클라우드에 더 새 데이터가 있다면 자동으로 알려줘서 덮어쓰는 실수를 방지하고 싶어."

## 3. 상세 요구사항
### 3.1 자동 백업
- `JournalContext` 또는 `ClassContext`의 데이터 변경을 감지.
- **Debounce 적용**: 3~5초간 추가 입력이 없을 때 `uploadData` 실행.
- 동기화 중임을 알리는 UI 인디케이터 연동.

### 3.2 지능형 버전 체크
- 앱 포커스 시 또는 일정 주기(예: 2분)마다 클라우드의 `updated_at` 시간 확인.
- 로컬의 `lastSync`보다 클라우드 시간이 더 최신이면 상단에 "새로운 데이터가 있습니다. 업데이트할까요?" 배너 노출.
- 사용자 승인 시 `downloadData` 실행.

## 4. 제약 사항 및 고려 사항
- **네트워크 비용**: 잦은 API 호출 방지를 위해 효율적인 폴링(Polling) 전략 수립.
- **충돌 해결**: 자동 백업 중 사용자가 다른 작업을 할 경우의 처리 (에러 핸들링).
- **에너지 효율**: 모바일 기기 사용 시 배터리 소모 고려.

## 5. 성공 기준
- [ ] 일지 작성 후 5초 내외로 상단 인디케이터가 동기화 상태로 변함.
- [ ] 다른 기기에서 백업 후, 현재 기기에서 '새 데이터 알림' 팝업이 정상적으로 표시됨.
- [ ] 수동 백업/복구 버튼과 충돌 없이 공존함.
